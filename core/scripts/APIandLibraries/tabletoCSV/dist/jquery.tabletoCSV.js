jQuery.fn.tableToCSV=function(){var t=function(t){return t=t.replace(/"/g,'""'),'"'+t+'"'};$(this).each(function(){var n=($(this),$(this).find("caption").text()),e=[],i=[];$(this).find("tr").each(function(){var n=[];$(this).find("th").each(function(){var n=t($(this).text());e.push(n)}),$(this).find("td").each(function(){var e=t($(this).text());n.push(e)}),n=n.join(","),i.push(n)}),e=e.join(","),i=i.join("\n");var o=e+i,a="data:text/csv;charset=utf-8,"+encodeURIComponent(o),c=document.createElement("a");c.href=a;var h=(new Date).getTime();""==n?c.download=h+".csv":c.download=n+"-"+h+".csv",document.body.appendChild(c),c.click(),document.body.removeChild(c)})};